# üîç –ü—Ä–æ–±–ª–µ–º–∞ —Å –µ–¥–∏–Ω–∏—Ü–∞–º–∏ –∏–∑–º–µ—Ä–µ–Ω–∏—è –≤ N8N AI –∞–Ω–∞–ª–∏–∑–µ

## ‚ùå –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:

AI –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç **—Ñ–∏–∑–∏—á–µ—Å–∫–∏ –Ω–µ–≤–æ–∑–º–æ–∂–Ω—ã–µ** –¥–∞–Ω–Ω—ã–µ –æ –ø–∏—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:

**–ü—Ä–∏–º–µ—Ä:** –£–ø–∞–∫–æ–≤–∫–∞ –ø–µ—á–µ–Ω—å—è 207–≥
- –£–≥–ª–µ–≤–æ–¥—ã: **140–≥**
- –ñ–∏—Ä—ã: **45–≥** 
- –ë–µ–ª–∫–∏: **12–≥**
- –ö–ª–µ—Ç—á–∞—Ç–∫–∞: **8–≥**
- **–°—É–º–º–∞: 205–≥ = 99% –æ—Ç –≤–µ—Å–∞ —É–ø–∞–∫–æ–≤–∫–∏** ‚úÖ

–ù–æ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Ç–æ–º, —á—Ç–æ:
- –°–∞—Ö–∞—Ä: **70–≥** (–≤—Ö–æ–¥–∏—Ç –≤ —É–≥–ª–µ–≤–æ–¥—ã, –Ω–æ –ø–æ–∫–∞–∑–∞–Ω –æ—Ç–¥–µ–ª—å–Ω–æ)
- –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É: **140–≥ + 70g = 210g > 207g** ‚ùå

## üéØ –ê–Ω–∞–ª–∏–∑ –¥–∞–Ω–Ω—ã—Ö –æ—Ç –≤–µ–±—Ö—É–∫–∞:

```json
{
  "portionInfo": {
    "estimatedWeight": 207
  },
  "nutritionInfo": {
    "calories": 980,
    "protein": 12,     // 12–≥ –±–µ–ª–∫–æ–≤
    "carbs": 140,      // 140–≥ —É–≥–ª–µ–≤–æ–¥–æ–≤ (–í–ö–õ–Æ–ß–ê–Ø —Å–∞—Ö–∞—Ä)
    "sugars": 70,      // 70–≥ —Å–∞—Ö–∞—Ä–∞ (–ß–ê–°–¢–¨ —É–≥–ª–µ–≤–æ–¥–æ–≤)
    "fat": 45,         // 45–≥ –∂–∏—Ä–æ–≤
    "fiber": 8         // 8–≥ –∫–ª–µ—Ç—á–∞—Ç–∫–∏
  }
}
```

## ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è:

**–£–≥–ª–µ–≤–æ–¥—ã 140g —Å–æ—Å—Ç–æ—è—Ç –∏–∑:**
- –°–∞—Ö–∞—Ä: 70g
- –ö—Ä–∞—Ö–º–∞–ª –∏ –¥—Ä—É–≥–∏–µ —É–≥–ª–µ–≤–æ–¥—ã: 70g

**–û–±—â–∏–π –≤–µ—Å –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤:**
- –ë–µ–ª–∫–∏: 12g
- –£–≥–ª–µ–≤–æ–¥—ã: 140g (–≤–∫–ª—é—á–∞—è 70g —Å–∞—Ö–∞—Ä–∞)
- –ñ–∏—Ä—ã: 45g
- –ö–ª–µ—Ç—á–∞—Ç–∫–∞: 8g
- **–ò—Ç–æ–≥–æ: 205g = 99% –æ—Ç 207g** ‚úÖ **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω–æ!**

## üõ†Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏:

–ö–æ–¥ —É–∂–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ:

```typescript
// –í handleStartEditingProduct
const baseMultiplier = 100 / weightNum; // 100 / 207 = 0.483

// –ü–µ—Ä–µ—Å—á–µ—Ç –Ω–∞ 100g:
carbs: 140 * 0.483 = 67.6g –Ω–∞ 100g ‚úÖ
sugars: 70 * 0.483 = 33.8g –Ω–∞ 100g ‚úÖ
fat: 45 * 0.483 = 21.7g –Ω–∞ 100g ‚úÖ
```

## üìã –ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –≤ N8N:

1. **–î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ AI –ø—Ä–æ–º–ø—Ç:**
   ```
   CRITICAL VALIDATION RULES:
   1. Sum of macronutrients MUST NOT exceed 85% of total weight
   2. Sugars are PART OF carbs, not additional to carbs
   3. Validate: protein + carbs + fat + fiber ‚â§ 85% of package weight
   ```

2. **–£–ª—É—á—à–∏—Ç—å –ø—Ä–∏–º–µ—Ä—ã –≤ –ø—Ä–æ–º–ø—Ç–µ** —Å —Ä–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–º–∏ –∑–Ω–∞—á–µ–Ω–∏—è–º–∏

3. **–î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É** —Ñ–∏–∑–∏—á–µ—Å–∫–æ–π –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç:

–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è AI –±—É–¥–µ—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å:
- **–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è** –ø–∏—Ç–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ** —á—Ç–æ —Å–∞—Ö–∞—Ä –≤—Ö–æ–¥–∏—Ç –≤ —É–≥–ª–µ–≤–æ–¥—ã
- **–§–∏–∑–∏—á–µ—Å–∫–∏ –≤–æ–∑–º–æ–∂–Ω—ã–µ** —Å–æ–æ—Ç–Ω–æ—à–µ–Ω–∏—è –º–∞–∫—Ä–æ–Ω—É—Ç—Ä–∏–µ–Ω—Ç–æ–≤

**–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–≤–∏–¥–∏—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–∞ 100g –ø—Ä–æ–¥—É–∫—Ç–∞!** ‚úÖ 